function getCustomizedPerfilMensal(e,a){return e>=0&&e<3?perfil_mensal[e].tabela[a].valor:new Number($("#perfil-mensal-input"+(a+1)).val())/100}function totalNecessidadesEnergiaFunction(){var e=new Number($("#perfil-mensal").val()),a=new Number($("#perfil-semanal").val()),o=new Number($("#temp-req").val()),r=new Number($("#distrito").val());for(necessidades_mes=[],totalNecessidadesEnergia=0,total=0,i=0;i<meses_numero_horas.length;i++){var t=0;for(j=1;j<rowId+1;j++){var s=new Number($("#tipo-consumo-value"+j).val()),n=$("#tipo-consumo"+j).val();t+=s*consumo_diario_agua[n].valor}var l=0;if(a>=0&&a<3)l=perfil_semanal[a].valor;else if(3==a){var c=0;for(k=1;k<8;k++)c+=new Number($("#perfil-semanal-input"+k).val());l=c/7/100}necessidades_mes[i]=new Number((t*(getCustomizedPerfilMensal(e,i)*l)*meses_numero_horas[i].n_dias*(o-irradiacao_temp_amb_temp_agua[r].mesI[i].valorTempAgua)*fatores_conversao[0]).toFixed(0)),totalNecessidadesEnergia+=new Number(necessidades_mes[i])}total=totalNecessidadesEnergia,correcaoOrientacao(),energiaSolarCaptada()}function correcaoOrientacao(){var e=$("#orientacao-input").val(),a=0;e>70?a=0:e>0&&(a=1.14-.0085*e),totalCorrecaoOrientacao=a.toFixed(3)}function getCorrecaoInclinacao(e,a){for(j=0;j<correcao_inclinacao.length;j++)if(e==correcao_inclinacao[j].latitude)return correcao_inclinacao[j].meses[a].valor}function energiaSolarCaptada(){var e=new Number($("#distrito").val()),a=new Number($("#distrito-latitude").val());for(totalEnergiaArray=[],totalEnergia=0,i=0;i<meses_numero_horas.length;i++)totalEnergiaArray[i]=new Number((rendimento_otico*perdas[1].valor-coeficient_perdas*((temperatura_utilizacao_alto-(irradiacao_temp_amb_temp_agua[e].mesI[i].valorTempAmb+irradiacao_temp_amb_temp_agua[e].mesI[i].valorTempAgua))/(getCorrecaoInclinacao(a,i)*(totalCorrecaoOrientacao*perdas[2].valor*irradiacao_temp_amb_temp_agua[e].mesI[i].valorIrr)*(1e3*fatores_conversao[1]/meses_numero_horas[i].n_horas_sol))))*(getCorrecaoInclinacao(a,i)*(totalCorrecaoOrientacao*perdas[2].valor*irradiacao_temp_amb_temp_agua[e].mesI[i].valorIrr))*(1-perdas[0].valor)*meses_numero_horas[i].n_dias).toFixed(0),totalEnergia+=new Number(totalEnergiaArray[i]);racio(),energiaSolarCaptada2(),energiaSolarUtilizada(),energiaSolarUtilizadaPercent(),energiaBackup(),energiaBackupPercent(),excedenteSolar(),excedenteSolarPerc(),necessidadesEnergeticaskWh(),cenarioI(),cenarioF(),reduction(),resume(),nextStep()}function racio(){totalRacio=new Number(total/totalEnergia).toFixed(2)}function energiaSolarCaptada2(){var e=$("#coletores-reanalise").val();for(totalEnergiaArray2=[],totalEnergia2=0,i=0;i<meses_numero_horas.length;i++)totalEnergiaArray2[i]=""==e||void 0==e?totalEnergiaArray[i]*(totalRacio/2.25).toFixed(0)*2.25:totalEnergiaArray[i]*e,totalEnergia2+=totalEnergiaArray2[i]}function energiaSolarUtilizada(){for(totalEnergiaSolarUtilizada=[],totalEnergiaSolar=0,i=0;i<meses_numero_horas.length;i++)totalEnergiaArray2[i]>necessidades_mes[i]?totalEnergiaSolarUtilizada[i]=necessidades_mes[i]:totalEnergiaSolarUtilizada[i]=totalEnergiaArray2[i],totalEnergiaSolar+=totalEnergiaSolarUtilizada[i]}function energiaSolarUtilizadaPercent(){for(totalEnergiaSolarUtilizadaPerc=[],totalEnergiaSolarPerc=0,i=0;i<meses_numero_horas.length;i++)totalEnergiaSolarUtilizadaPerc[i]=totalEnergiaSolarUtilizada[i]/necessidades_mes[i];totalEnergiaSolarPerc=totalEnergiaSolar/total}function energiaBackup(){for(totalEnergiaBackupMes=[],totalEnergiaBackup=0,i=0;i<meses_numero_horas.length;i++)necessidades_mes[i]-totalEnergiaArray2[i]<0?totalEnergiaBackupMes[i]=0:totalEnergiaBackupMes[i]=necessidades_mes[i]-totalEnergiaArray2[i],totalEnergiaBackup+=totalEnergiaBackupMes[i]}function energiaBackupPercent(){for(totalEnergiaBackupMesPerc=[],totalEnergiaBackupPerc=0,i=0;i<meses_numero_horas.length;i++)totalEnergiaBackupMesPerc[i]=totalEnergiaBackupMes[i]/necessidades_mes[i];totalEnergiaBackupPerc=totalEnergiaBackup/total}function excedenteSolar(){for(totalExcedenteSolarArray=[],totalExcedenteSolar=0,i=0;i<meses_numero_horas.length;i++)totalExcedenteSolarArray[i]=totalEnergiaArray2[i]-totalEnergiaSolarUtilizada[i],totalExcedenteSolar+=totalExcedenteSolarArray[i]}function excedenteSolarPerc(){for(totalExcedenteSolarArrayPerc=[],totalExcedenteSolarPerc=0,i=0;i<meses_numero_horas.length;i++)totalExcedenteSolarArrayPerc[i]=totalExcedenteSolarArray[i]/totalEnergiaArray2[i];totalExcedenteSolarPerc=totalExcedenteSolar/totalEnergia2}function necessidadesEnergeticaskWh(){for(necessidades_mes_kWh=[],total_mes_kWh=0,i=0;i<meses_numero_horas.length;i++)necessidades_mes_kWh[i]=new Number(necessidades_mes[i]*fatores_conversao[1]).toFixed(0),total_mes_kWh+=necessidades_mes_kWh[i]}function cenarioI(){var e=2==$("#rend").val()?$("#iRendMan").val():$("#rend").val(),a=$("#sis-prod").val(),o=$("#age").val(),r=$("#custo-unit-input").val(),t=0;for(cenarioI_mes=[],cenarioI_custos=[],total_cenarioI_mes=0,total_cenarioI_custos=0,t=1==e&&sistemas_prod_aqs[a].rendimento[o].nome==idades[o]?sistemas_prod_aqs[a].rendimento[o].valor:e/100,i=0;i<meses_numero_horas.length;i++)cenarioI_mes[i]=new Number(necessidades_mes_kWh[i]/t).toFixed(0),cenarioI_custos[i]=new Number(cenarioI_mes[i]*r).toFixed(2),total_cenarioI_mes+=new Number(cenarioI_mes[i]),total_cenarioI_custos+=new Number(cenarioI_custos[i]);total_cenarioI_custos=total_cenarioI_custos.toFixed(2)}function cenarioF(){var e=2==$("#rend").val()?$("#iRendMan").val():$("#rend").val(),a=$("#sis-prod").val(),o=$("#age").val(),r=$("#custo-unit-input").val(),t=0;for(cenarioF_mes=[],total_cenarioF_mes=0,cenarioF_custos=[],total_cenarioF_custos=0,t=1==e&&sistemas_prod_aqs[a].rendimento[o].nome==idades[o]?sistemas_prod_aqs[a].rendimento[o].valor:e/100,i=0;i<meses_numero_horas.length;i++)cenarioF_mes[i]=new Number(totalEnergiaBackupMes[i]*fatores_conversao[1]/t).toFixed(0),total_cenarioF_mes+=new Number(cenarioF_mes[i]),cenarioF_custos[i]=new Number(cenarioF_mes[i]*r).toFixed(2),total_cenarioF_custos+=new Number(cenarioF_custos[i]);total_cenarioF_custos=total_cenarioF_custos.toFixed(2)}function getSistemasProdAQSValues(){var e=$("#sis-prod").val();""!=e&&void 0!=e&&e>=0&&$("#custo-unit-input").attr("value",sistemas_prod_aqs[e].custo_unit)}function getCopRendValues(){var e=$("#rend").val();2==e?($("#iRendMan").show(),$("#labelIRendman").show()):($("#iRendMan").val(""),$("#iRendMan").hide(),$("#labelIRendman").hide()),1==e?$(".age").removeClass("hide-age"):$(".age").addClass("hide-age")}function reduction(){for(reducao_mes=[],total_reducao_mes=0,reducao_percent=[],total_reduca_percent=0,i=0;i<meses_numero_horas.length;i++)reducao_mes[i]=new Number(cenarioI_custos[i]-cenarioF_custos[i]).toFixed(0),total_reducao_mes+=new Number(reducao_mes[i]),reducao_percent[i]=new Number(reducao_mes[i]/cenarioI_custos[i]*100).toFixed(0);total_reduca_percent=(total_reducao_mes/total_cenarioI_custos*100).toFixed(0)}function resume(){n_colectores=0,area_colectores=0,volume_acumulacao_resume=0,necess_ener_anuais=0,energia_solar=0,energia_sist_apoio=0,excedente_verao=0,fracao_solar=0,s_sist_solar=0,c_sist_solar=0,reducao_solar=0,investimento_resume=0,colectores=0,depositos_acessorios=0,instalacao=0,op_manutencao=0,periodo_retorno=0;var e=$("#coletores-reanalise").val();n_colectores=void 0!=e&&""!=e?new Number(e):new Number(totalRacio/area_coletor_solar).toFixed(0),area_colectores=void 0==e||""==e?new Number(n_colectores*area_coletor_solar).toFixed(2):new Number(e*area_coletor_solar).toFixed(2),volume_acumulacao_resume=area_colectores*volume_acumulacao_info,necess_ener_anuais=new Number(total*fatores_conversao[1]).toFixed(0),energia_solar=new Number(totalEnergiaSolar*fatores_conversao[1]).toFixed(0),energia_sist_apoio=new Number(totalEnergiaBackup*fatores_conversao[1]).toFixed(0),excedente_verao=max(totalExcedenteSolarArrayPerc)>avisos[0].valor?max(totalExcedenteSolarArrayPerc):"",excedente_verao_perc=new Number(100*excedente_verao).toFixed(0),fracao_solar=new Number(100*totalEnergiaSolarPerc).toFixed(0),s_sist_solar=total_cenarioI_custos,c_sist_solar=total_cenarioF_custos,reducao_solar=total_reducao_mes,colectores=area_colectores<10?investimentoI[0].info[0].valor*area_colectores:area_colectores>=100?investimentoI[0].info[2].valor*area_colectores:investimentoI[0].info[1].valor*area_colectores,depositos_acessorios=volume_acumulacao_resume<500?volume_acumulacao_resume*investimentoI[1].info[0].valor:volume_acumulacao_resume>=2e3?volume_acumulacao_resume*investimentoI[1].info[2].valor:volume_acumulacao_resume*investimentoI[1].info[1].valor,instalacao=(colectores+depositos_acessorios)*investimentoI[2].valor_direto,investimento_resume=colectores+depositos_acessorios+instalacao,op_manutencao=new Number(investimento_resume*investimentoI[3].valor_direto).toFixed(2),periodo_retorno=new Number(investimento_resume/reducao_solar).toFixed(1),$("#n-coletores-resumo").html(n_colectores),$("#area-resumo").html(area_colectores+" m2"),$("#volume-resumo").html(volume_acumulacao_resume+" litros"),$("#nec-ener-resumo").html(necess_ener_anuais),$("#ener-solar-resumo").html(energia_solar),$("#ener-backup-resumo").html(energia_sist_apoio),$("#excedente-resumo").html(excedente_verao_perc+"%"),$("#fracao-resumo").html(fracao_solar+"%"),$("#s-sistema-resumo").html(s_sist_solar+" €"),$("#c-sistema-resumo").html(c_sist_solar+" €"),$("#reduc-anual-resumo").html(reducao_solar+" €"),$("#investimento-resumo").html(investimento_resume+" €"),$("#coletores-resumo").html(colectores+" €"),$("#deposito-resumo").html(depositos_acessorios+" €"),$("#instalacao-resumo").html(instalacao+" €"),$("#operacao-resumo").html(op_manutencao+" €"),$("#periodo-resumo").html(periodo_retorno+" anos")}function max(e){var a=0;for(i=0;i<e.length;i++)e[i]>a&&(a=e[i]);return a}