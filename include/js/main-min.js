function buildDistrito(){for(var e=0;e<irradiacao_temp_amb_temp_agua.length;e++)$("#distrito").append($('<option class="op"></option>').val(e).html(irradiacao_temp_amb_temp_agua[e].distritoI))}function getDistrictValues(){var e=new Number($("#distrito").val());$("#distrito-latitude").attr("value",irradiacao_temp_amb_temp_agua[e].latitude)}function buildSistemaProdAQS(){for(var e=0;e<sistemas_prod_aqs.length;e++)$("#sis_prod").append($('<option class="op"></option>').val(e).html(sistemas_prod_aqs[e].nome))}function getSistemasProdAQSValues(){var e=$("#sis_prod").val();if(""!=e&&void 0!=e&&0==e?($("#labelRendimento").html("COP"),$("#rend").val(""),$("#labelIRendman").html("Insira o COP"),$("#labelIRendman").hide(),$("#iRendMan").hide(),$("#iRendMan").val(""),$("#iRendMan").removeAttr("disabled"),$("#iRendMan").attr("placeholder","0"),$("#rend").find("option[value='2']").html("Inserir COP")):""!=e&&void 0!=e&&e>0?($("#labelRendimento").html("Rendimento (%)"),$("#rend").val(""),$("#labelIRendman").html("Insira o rendimento"),$("#age").val(""),$("#labelIRendman").hide(),$("#iRendMan").hide(),$("#iRendMan").val(""),$("#iRendMan").removeAttr("disabled"),$("#iRendMan").attr("placeholder","0%"),$("#rend").find("option[value='2']").html("Inserir rendimento")):($("#labelRendimento").html("Rendimento (%) / COP"),$("#rend").val(""),$("#age").val(""),$("#age").hide(),$("#labelIRendman").hide(),$("#iRendMan").hide(),$("#iRendMan").val(""),$("#iRendMan").removeAttr("disabled"),$("#rend").find("option[value='2']").html("Inserir rendimento")),""!=e&&void 0!=e&&e>=0){$("#custo-unit-input").val((sistemas_prod_aqs[e].custo_unit*sistemas_prod_aqs[e].fator_conversao).toFixed(2));var a=$("#custo-unit-label")[0].textContent.indexOf("("),o=$("#custo-unit-label")[0].textContent.substring(0,a)+" (€/"+sistemas_prod_aqs[e].unidade+")";$("#custo-unit-label")[0].textContent=o}getCopRendValues()}function getCopRendValues(){var e=$("#sis_prod").val(),a=$("#rend").val();""!=a&&void 0!=a&&2==a&&0==e&&""!=e&&void 0!=e?($("#rend").find("option[value='2']").html("Inserir COP"),$("#iRendMan").show(),$("#iRendMan").attr("max","7"),$(".age").hide(),$("#age").val("")):""!=a&&void 0!=a&&2==a&&e>0&&""!=e&&void 0!=e?($("#rend").find("option[value='2']").html("Inserir rendimento"),$("#iRendMan").show(),$("#iRendMan").attr("max","100"),$(".age").hide(),$("#age").val("")):""!=a&&void 0!=a&&1==a?($("#iRendMan").val(""),$(".age").show(),$("#age").show(),$("#age").val(""),$("#iRendMan").hide(),$("#labelIRendman").hide()):($("#iRendMan").hide(),$("#labelIRendman").hide(),$(".age").hide(),$("#age").val(""))}function buildAge(){for(var e=0;e<sistemas_prod_aqs[e].rendimento.length;e++)$("#age").append($('<option class="op"></option>').val(e).html(sistemas_prod_aqs[e].rendimento[e].nome))}function buildTipoConsumo(){for(var e=0;e<consumo_diario_agua.length;e++)$(".tipo-consumo").append($('<option class="op"></option>').val(e).html(consumo_diario_agua[e].nome))}function getTipoConsumo(){var e=new Number($("#tipo-consumo"+rowId).val());$("#tipo-consumo-descricao"+rowId).html(consumo_diario_agua[e].numero_de)}function buildPerfilMensal(){for(var e=0;e<perfil_mensal.length;e++)$("#perfil-mensal").append($('<option class="op"></option>').val(e).html(perfil_mensal[e].nome))}function getPerfilMensal(){3==$("#perfil-mensal").val()?$(".table-mensal").removeClass("hide-perfil-mensal"):$(".table-mensal").addClass("hide-perfil-mensal"),getInclinacao()}function buildPerfilSemanal(){for(var e=0;e<perfil_semanal.length;e++)$("#perfil-semanal").append($('<option class="op"></option>').val(e).html(perfil_semanal[e].nome))}function getPerfilSemanal(){3==$("#perfil-semanal").val()?$(".table-semanal").removeClass("hide-perfil-semanal"):$(".table-semanal").addClass("hide-perfil-semanal")}function buildTempReq(){$("#temp-req").attr("value",temperatura_utilizacao_alto)}function buildDesvios(){for(var e=0;e<desvios.length;e++)$("#orientacao-sel").append($('<option class="op"></option>').val(e).html(desvios[e].nome))}function getDesvios(){var e=new Number($("#orientacao-sel").val());$("#orientacao-input").attr("value",desvios[e].valor),$("#orientacao-input").val(desvios[e].valor),3==$("#orientacao-sel").val()?$("#orientacao-input").removeAttr("disabled"):$("#orientacao-input").attr("disabled","disabled")}function getInclinacao(){var e=new Number($("#distrito").val()),a=new Number($("#perfil-mensal").val());$("#inclinacao-input").attr("value",irradiacao_temp_amb_temp_agua[e].latitude+perfil_mensal[a].latitude)}function nextStep(){var e=$(".step:visible").data("id"),a=$(".step:visible").data("id")+1;0==$("#menu-choice-sel").val()&&($('[data-id="'+e+'"]').hide(),$('[data-id="'+a+'"]').show(),$(".anterior:hidden").length>1&&$(".anterior").show(),a<4&&($(".but-2").show(),$(".end-step").hide()),3==a&&($(".but-2").hide(),$(".end-step").show()),4!=a&&5!=a||(5==a&&4==e&&$('[data-id="'+e+'"]').show(),$(".print_pdf").show(),$("#reanalise-but").show(),$("#reload-but").show(),$(".end-but").hide()))}function prevStep(){var e=$(".step:visible").data("id"),a=$(".step:visible").data("id")-1;$('[data-id="'+e+'"]').hide(),$('[data-id="'+a+'"]').show(),1==a&&$(".anterior").hide(),a<3&&($(".but-2").show(),$(".end-step").hide()),3==a&&($(".but-2").hide(),$(".print_pdf").hide(),$("#reanalise-but").hide(),$("#reload-but").hide(),$("#coletores-reanalise").val(""),$(".end-step").show(),$(".end-but").show())}$(document).ready(function(){buildDistrito(),buildSistemaProdAQS(),buildAge(),buildTipoConsumo(),buildPerfilMensal(),buildPerfilSemanal(),buildTempReq(),buildDesvios(),getSistemasProdAQSValues(),$("#distrito").change(getDistrictValues),$("#sis_prod").change(getSistemasProdAQSValues),$("#cop").change(getCopRendValues),$("#rend").change(getCopRendValues),$("#tipo-consumo"+rowId).change(getTipoConsumo),$("#perfil-mensal").change(getPerfilMensal),$("#perfil-semanal").change(getPerfilSemanal),$("#orientacao-sel").change(getDesvios),$("#perfil-semanal").change(function(){var e=$("#perfil-semanal").val();0==e&&void 0!=e&&""!=e?$("#perfil-semanal").css("width","56%"):$("#perfil-semanal").css("width","52%")}),$("#add").on("click",function(){rowId++;var e=$("#tb tr:eq(1)").clone(!0).appendTo("#tb").insertBefore("#add_row");e.find("input").val("").attr("id","tipo-consumo-value"+rowId),e.find("select").attr("id","tipo-consumo"+rowId),e.find("td:eq(1)").attr("id","tipo-consumo-descricao"+rowId).html(""),$("#tipo-consumo-value"+rowId).rules("add",{required:!0,min:1,step:1,digits:!0,messages:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>',min:'<label style="font-size: 14px; color: red;">O mínimo é 1.</label>',step:'<label style="font-size: 14px; color: red;">O passo de incremento é de 1.</label>',digits:'<label style="font-size: 14px; color: red;">Insera números sem casas decimais.Ex: 10</label>'}}),$("#tipo-consumo"+rowId).rules("add",{required:!0,messages:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'}})}),$(document).on("click","#remove",function(){rowId--,$(this).closest("tr").index()>1?$(this).closest("tr").remove():alert("Não pode remover a última coluna.")}),$("#solar-termico").validate({rules:{distrito:{required:!0},sis_prod:{required:!0},rend:{required:!0},iRendMan:{required:function(e){return""!=$("#rend").val()&&void 0!=$("#rend").val()&&2==$("#rend").val()},step:.1,min:0,max:function(e){return""!=$("#sis_prod").val()&&void 0!=$("#sis_prod").val()&&0==$("#sis_prod").val()?7:110},number:!0},age:{required:function(e){return""!=$("#rend").val()&&void 0!=$("#rend").val()&&1==$("#rend").val()}},"custo-unit-input":{required:!0,number:!0,step:.01,min:0},"tipo-consumo1":{required:!0},"tipo-consumo-value1":{required:!0,min:1,step:1,digits:!0},"perfil-mensal":{required:!0},"perfil-semanal":{required:!0},"temp-req":{required:!0,min:0,max:100,step:1,number:!0},"orientacao-sel":{required:!0},"orientacao-input":{required:!0,min:0,max:70,step:1,digits:!0},"coletores-reanalise":{min:0,step:1,digits:!0}},messages:{distrito:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},sis_prod:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},rend:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},iRendMan:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>',min:'<label style="font-size: 14px; color: red;">O rendimento mínimo é 0%.</label>',max:function(e){return""!=$("#sis_prod").val()&&void 0!=$("#sis_prod").val()&&0==$("#sis_prod").val()?'<label style="font-size: 14px; color: red;">O rendimento máximo é 7.</label>':'<label style="font-size: 14px; color: red;">O rendimento máximo é 110%.</label>'},step:'<label style="font-size: 14px; color: red;">o incremento é de 0.1.</label>',number:'<label style="font-size: 14px; color: red;">Introduza (.) em vez de (,).</label>'},age:{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},"custo-unit-input":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>',number:'<label style="font-size: 14px; color: red;">Inserir um número válido. Ex: 0.10</label>',step:'<label style="font-size: 14px; color: red;">o passo de incremento é de 0.00001 .</label>',min:'<label style="font-size: 14px; color: red;">O mínimo é 0.00001 .</label>'},"tipo-consumo1":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},"tipo-consumo-value1":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>',min:'<label style="font-size: 14px; color: red;">O mínimo é 1.</label>',step:'<label style="font-size: 14px; color: red;">O passo de incremento é de 1.</label>',digits:'<label style="font-size: 14px; color: red;">Insera números sem casas decimais.Ex: 10</label>'},"perfil-mensal":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},"perfil-semanal":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},"temp-req":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>',min:'<label style="font-size: 14px; color: red;">O mínimo é 1 ºC.</label>',max:'<label style="font-size: 14px; color: red;">O máximo é 100 ºC.</label>',number:'<label style="font-size: 14px; color: red;">Introduza (.) em vez de (,).</label>',step:'<label style="font-size: 14px; color: red;">O passo de incremento é de 1 </label>'},"orientacao-sel":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>'},"orientacao-input":{required:'<label style="font-size: 14px; color: red;">Este campo é obrigatório.</label>',min:'<label style="font-size: 14px; color: red;">O mínimo é 0 º.</label>',max:'<label style="font-size: 14px; color: red;">O máximo é 70 º.</label>',digits:'<label style="font-size: 14px; color: red;">Insera números sem casas decimais.Ex: 10</label>'},"coletores-reanalise":{min:'<label style="font-size: 14px; color: red;">O mínimo é 1.</label>',step:'<label style="font-size: 14px; color: red;">O passo de incremento é de 1.</label>',digits:'<label style="font-size: 14px; color: red;">Insera números sem casas decimais.Ex: 10</label>'}}}),$(".seguinte").click(function(){$("#solar-termico").valid()&&nextStep()}),$(".end-but").click(function(){$("#solar-termico").valid()&&totalNecessidadesEnergiaFunction()}),$("#reanalise-but").click(function(){$("#solar-termico").valid()&&totalNecessidadesEnergiaFunction()}),$("#reload-but").click(function(){location.reload()})});